{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/octagon.svg","../src/img/close.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByType(axiosParams) {\n  const url = 'https://pixabay.com/api/';\n  const response = await axios.get(url, {\n    params: axiosParams,\n  });\n  return response.data;\n}\n","export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__aaabd9ba__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/octagon.svg';\nimport closeIcon from '../img/close.svg';\n\nexport function imageTemplate(data) {\n  return `<li class=\"gallery-card\">\n        <a href=\"${data.largeImageURL}\"\n          ><img\n            class=\"gallery-image\"\n            src=\"${data.webformatURL}\"\n            alt=\"${data.tags}\"\n            title=\"\"\n          />\n        </a>\n        <div class=\"gallery-card-items\">\n          <p class=\"gallery-card-info\">\n            Likes\n            <span class=\"gallery-card-data\">${data.likes}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Views\n            <span class=\"gallery-card-data\">${data.views}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Comments\n            <span class=\"gallery-card-data\">${data.comments}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Downloads\n            <span class=\"gallery-card-data\">${data.downloads}</span>\n          </p>\n        </div>\n      </li>`;\n}\nexport function galleryTemplate(data) {\n  return data.map(imageTemplate).join('');\n}\n\nexport function showError(message) {\n  iziToast.error({\n    message,\n    position: 'topRight',\n    messageColor: '#ffffff',\n    messageSize: '16px',\n    backgroundColor: '#ef4040',\n    iconColor: '#ffffff',\n    iconUrl: errorIcon,\n    timeout: 5000,\n    close: false,\n    closeOnEscape: true,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"background-color: transparent\" ><img src=${closeIcon}></button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ],\n  });\n}\nexport function checkBtnStatus(data, params, btnElem) {\n  const maxPage = Math.ceil(data.totalHits / params.per_page);\n  const isLastPage = maxPage === params.page;\n  if (isLastPage) {\n    btnElem.classList.add('hidden');\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    btnElem.classList.remove('hidden');\n  }\n}\nexport function smoothScroll(elem) {\n  const card = elem;\n  const cardSize = card.getBoundingClientRect();\n  scrollBy({\n    behavior: 'smooth',\n    top: cardSize.height * 2,\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImagesByType } from './js/pixabay-api';\nimport * as render from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  searchMore: document.querySelector('.search-more'),\n};\nconst params = {\n  key: '42208062-89bae71b6ac9d6683cff7159b',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: '',\n  per_page: 15,\n};\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.searchMore.addEventListener('click', onGetImageByPage);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  params.q = e.target.elements.input.value;\n  params.page = 1;\n  refs.gallery.innerHTML = '';\n  refs.searchMore.classList.add('hidden');\n  if (!params.q.trim()) {\n    render.showError('Please put searching image name');\n  } else {\n    refs.loader.classList.remove('hidden');\n    try {\n      const data = await getImagesByType(params);\n      if (data.totalHits === 0) {\n        refs.loader.classList.add('hidden');\n        render.showError(\n          'Sorry, there are no images matching <br/> your search query. Please try again!'\n        );\n        return;\n      }\n      const markup = render.galleryTemplate(data.hits);\n      refs.gallery.innerHTML = markup;\n      gallery.refresh();\n      render.checkBtnStatus(data, params, refs.searchMore);\n    } catch (error) {\n      render.showError(error);\n    }\n    refs.loader.classList.add('hidden');\n  }\n  refs.form.reset();\n}\nasync function onGetImageByPage(e) {\n  params.page += 1;\n\n  refs.loader.classList.remove('hidden');\n  try {\n    const data = await getImagesByType(params);\n    if (data.totalHits === 0) {\n      return render.showError();\n    }\n    const markup = render.galleryTemplate(data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n    render.checkBtnStatus(data, params, refs.searchMore);\n  } catch (error) {\n    render.showError(error);\n  }\n  refs.loader.classList.add('hidden');\n  render.smoothScroll(refs.gallery.firstElementChild);\n}\n"],"names":["getImagesByType","axiosParams","url","axios","errorIcon","closeIcon","imageTemplate","data","galleryTemplate","showError","message","iziToast","instance","toast","checkBtnStatus","params","btnElem","smoothScroll","elem","cardSize","refs","gallery","SimpleLightbox","onFormSubmit","onGetImageByPage","e","render.showError","markup","render.galleryTemplate","render.checkBtnStatus","error","render.smoothScroll"],"mappings":"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"}